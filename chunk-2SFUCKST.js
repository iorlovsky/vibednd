import{E as P,F as $,J as N,L as h,x as _}from"./chunk-RB4FVMQ3.js";import{D as F,E,F as j,K as T,L as M,M as C,O as b,R as y,U as D,a as d,g as O,ga as p,j as R,ja as i,ka as a,la as c,ma as w,na as A,v as l,x as v,xa as x}from"./chunk-PP37AZUX.js";var K={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},g="__@ngrx/effects_create__";function bt(t,e={}){let r=e.functional?t:t(),n=d(d({},K),e);return Object.defineProperty(r,g,{value:n}),r}function Y(t){return Object.getOwnPropertyNames(t).filter(n=>t[n]&&t[n].hasOwnProperty(g)?t[n][g].hasOwnProperty("dispatch"):!1).map(n=>{let o=t[n][g];return d({propertyName:n},o)})}function J(t){return Y(t)}function U(t){return Object.getPrototypeOf(t)}function L(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function G(t){return typeof t=="function"}function X(t){return t.filter(G)}function q(t,e,r){let n=U(t),u=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,s=J(t).map(({propertyName:f,dispatch:V,useEffectsErrorHandler:B})=>{let m=typeof t[f]=="function"?t[f]():t[f],I=B?r(m,e):m;return V===!1?I.pipe(M()):I.pipe(D()).pipe(l(z=>({effect:t[f],notification:z,propertyName:f,sourceName:u,sourceInstance:t})))});return F(...s)}var Q=10;function H(t,e,r=Q){return t.pipe(j(n=>(e&&e.handleError(n),r<=1?t:H(t,e,r-1))))}var Dt=(()=>{let e=class e extends O{constructor(n){super(),n&&(this.source=n)}lift(n){let o=new e;return o.source=this,o.operator=n,o}};e.\u0275fac=function(o){return new(o||e)(a(N))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wt(...t){return E(e=>t.some(r=>typeof r=="string"?r===e.type:r.type===e.type))}var At=new i("@ngrx/effects Internal Root Guard"),xt=new i("@ngrx/effects User Provided Effects"),_t=new i("@ngrx/effects Internal Root Effects"),Pt=new i("@ngrx/effects Internal Root Effects Instances"),$t=new i("@ngrx/effects Internal Feature Effects"),Nt=new i("@ngrx/effects Internal Feature Effects Instance Groups"),W=new i("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>H}),Z="@ngrx/effects/init",tt=_(Z);function et(t,e){if(t.notification.kind==="N"){let r=t.notification.value;!nt(r)&&e.handleError(new Error(`Effect ${rt(t)} dispatched an invalid action: ${ot(r)}`))}}function nt(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function rt({propertyName:t,sourceInstance:e,sourceName:r}){let n=typeof e[t]=="function";return!!r?`"${r}.${String(t)}${n?"()":""}"`:`"${String(t)}()"`}function ot(t){try{return JSON.stringify(t)}catch{return t}}var st="ngrxOnIdentifyEffects";function it(t){return S(t,st)}var ft="ngrxOnRunEffects";function ct(t){return S(t,ft)}var ut="ngrxOnInitEffects";function at(t){return S(t,ut)}function S(t,e){return t&&e in t&&typeof t[e]=="function"}var k=(()=>{let e=class e extends R{constructor(n,o){super(),this.errorHandler=n,this.effectsErrorHandler=o}addEffects(n){this.next(n)}toActions(){return this.pipe(y(n=>L(n)?U(n):n),v(n=>n.pipe(y(dt))),v(n=>{let o=n.pipe(b(s=>lt(this.errorHandler,this.effectsErrorHandler)(s)),l(s=>(et(s,this.errorHandler),s.notification)),E(s=>s.kind==="N"&&s.value!=null),C()),u=n.pipe(T(1),E(at),l(s=>s.ngrxOnInitEffects()));return F(o,u)}))}};e.\u0275fac=function(o){return new(o||e)(a(x),a(W))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dt(t){return it(t)?t.ngrxOnIdentifyEffects():""}function lt(t,e){return r=>{let n=q(r,t,e);return ct(r)?r.ngrxOnRunEffects(n):n}}var Et=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(n,o){this.effectSources=n,this.store=o,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(o){return new(o||e)(a(k),a(h))},e.\u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ut(...t){let e=t.flat(),r=X(e);return w([r,A(()=>{c(P),c($,{optional:!0});let n=c(Et),o=c(k),u=!n.isStarted;u&&n.start();for(let s of e){let f=G(s)?c(s):s;o.addEffects(f)}u&&c(h).dispatch(tt())})])}export{bt as a,Dt as b,wt as c,Ut as d};
